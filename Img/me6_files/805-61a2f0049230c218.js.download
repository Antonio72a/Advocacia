"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{13754:function(n,t,l){l.d(t,{j:function(){return N}});var e={};l.r(e),l.d(e,{button:function(){return i},inline:function(){return s},span:function(){return c}});var a=l(97458),o=l(23848);l(97584),l(33906),l(73062);var r=l(22319),i=(0,r.c)({defaultClassName:"_bglng83 _1286nb12iw _1286nb128w _1286nb123k _1286nb12dk _1286nb14ke _1286nb14lq _1286nb14n2 _1286nb14oe _1286nb12re _1286nb12o2 _1286nb13pk _1286nb119",variantClassNames:{mode:{follow:"_1286nb16ft _1286nb17t2 _1286nb17yz",following:"_1286nb16ft _1286nb16nh _1286nb17t2 _1286nb186q"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),s=(0,r.c)({defaultClassName:"_bglng8a _bglng87 _1286nb119",variantClassNames:{mode:{follow:"_1286nb16ft",following:"_1286nb16ft _1286nb16nh"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),c="_bglng8d",u=l(96005),f=l(42011),b=l(52983),w=l(51835),d=l(95815);let h=async()=>{let n=await fetch("/api/social/follow");if(!n.ok)throw Error();return await n.json()},_=(0,w.cn)({key:"userFollowsState",default:[],effects:[n=>{let{setSelf:t}=n;(async()=>{let n=async()=>await h();t(await n())})()}]}),g=(0,w.CG)({key:"authorUserFollow",get:n=>{let{id:t}=n;return n=>{let{get:l}=n;return!!l(d.UA)&&l(_).includes(t)}},set:n=>{let{id:t}=n;return(n,l)=>{let{get:e,set:a}=n,o=e(_);a(_,l?o.filter(n=>n!==t):[...o,t])}}});var m=l(51362);let k=async(n,t)=>{if(!(await fetch("/api/social/follow?id=".concat(t),{method:n?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var p=l(62168);let v=(n,t)=>{let l=(0,p.PN)(),e={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:n,location:t,category:"follow-contributor"};return()=>l(e)},C=(n,t,l)=>{let[e,a]=(0,b.useState)(!0),{setToast:o}=(0,m.p)(),{loginUrl:r,setLoginCookies:i}=(0,u.J)(),s=(0,f.d)(),[c,d]=(0,w.FV)(g({id:n})),h=v(t,l),_=(0,b.useCallback)(()=>{if(!s){i(),window.location.href=r;return}a(!1),k(c,n).then(()=>d(c)).then(()=>!c&&h()).catch(()=>o()).finally(()=>a(!0))},[s,c,n,i,r,d,h,o]);return{following:c,disabled:!e,onClick:_}},N=n=>{let{id:t,name:l,location:r,buttonStyle:i="button"}=n,{t:s}=(0,o.$G)("common"),{following:u,onClick:f,disabled:b}=C(t,l,r),w="inline"===i?"inline":"button";return u?(0,a.jsxs)("button",{className:e[w]({mode:"following"}),onClick:f,disabled:b,children:[(0,a.jsx)("span",{className:c,children:s("following")}),(0,a.jsx)("span",{className:c,children:s("unfollow")})]}):(0,a.jsx)("button",{className:e[w](),onClick:f,disabled:b,children:s("follow")})}},64357:function(n,t,l){var e=l(97458);t.Z=n=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...n,children:(0,e.jsx)("path",{d:"M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"})})}}]);